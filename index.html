<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/x-icon" href="icons/favicon.ico">
  <link rel="apple-touch-icon" href="icons/ios/192.png">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <meta name="theme-color" content="rgb(248, 223, 219)">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <script>
    function updateThemeColor() {
      const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;

      // Update theme color
      const themeColorMetaTag = document.querySelector('meta[name="theme-color"]');
      themeColorMetaTag.content = prefersDarkScheme ? 'rgb(44, 41, 45)' : 'rgb(248, 223, 219)'; // Example colors for dark and light
    
      // Update apple-mobile-web-app-status-bar-style
      const appleStatusBarStyleMetaTag = document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');
      appleStatusBarStyleMetaTag.content = prefersDarkScheme ? 'rgb(44, 41, 45)' : 'rgb(248, 223, 219)';
    }
    
    document.addEventListener('DOMContentLoaded', updateThemeColor)
    window.matchMedia('(prefers-color-scheme: dark)').addListener(updateThemeColor);
    
    </script>
  
  
  <title>Ovid</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/style.css">
  <!-- <link rel="stylesheet" href="style.css" type="text/css" /> -->
  <link rel="stylesheet" href="css/settings.css" type="text/css">
  <link rel="stylesheet" href="//cdn.quilljs.com/1.3.6/quill.bubble.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="manifest" href="manifest.json">
</head>

<body>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
          <span id="exit-btn">&times;</span>
          <h2>Settings</h2>
  
          <div class="word_count"></div>
  
         <!-- Font selector --> 
          <label for="font-selector">Font:</label>
          <select id="font-selector">
            <option value="'Helvetica', sans-serif">Helvetica</option>
            <option value="'EB Garamond', serif">EB Garamond</option>
            <option value="'Courier Prime', monospace">Courier Prime</option>
          </select>
  
          <br>

          <!-- Background Color selector -->
          <label for="bgColor-selector">Background:</label>
          <select id="bgColor-selector">
            <option value="rgb(248, 223, 219)">Light</option>
            <option value="rgb(44, 41, 45)">Dark</option>
          </select>
  
          <!-- <br> -->
  
          <!-- Font size slider -->
          <label for="font-size-slider">Font Size:</label>
          <input type="range" id="font-size-slider" min="1" max="3" step="0.1" value="1.8">
          <span id="font-size-value" style="float:right;"></span>
  
          <br>
          <!-- Margin slider -->
          <label for="margin-size-slider">Margins:</label>
          <input type="range" id="margin-size-slider" min="0" max="60" step="1" value="20">
          <span id="margin-size-value" style="float:right;"></span>
  
          <br>
  
  
          <div class="settings-buttons">
            <button id="save" onclick="downloadTextAsFile();">Save</button>
            <button id="openFile" onclick="openFile();">Open</button>
            <button id="newFile" onclick="newFile();">New</button>
          </div>

          <input style="visibility: hidden; display: none;" style="margin: 0;" type="file" accept=".txt" id="fileInput"/>
    
        </div>
      </div>

    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <textarea id="textarea-title" placeholder="Untitled" maxlength="32" oninput="" ></textarea>
            </div>
        </div>

        <div class="row">
            <div class="twelve columns">
                <div id="editor">
                </div>
            </div>
        </div>
    </div>

    <div class="row toolbar">
        <!-- <span class="toolbar-data data-title">Untitled</span > -->
        <span class="toolbar-data data-word-count">Words: 0</span >
        <span class="toolbar-data data-date"></span >
        <span class="toolbar-data data-time"></span >
    </div>
        
    <button id="settings-btn" class="button-primary"><i class="fa-solid fa-ellipsis-vertical"></i></button>


    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="js/quill-config.js"></script> 
    <script src="js/storage.js"></script>
    <script src="js/UI.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/main.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
    navigator.serviceWorker.register('service-worker.js').then(function(registration) {
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}

  </script>

</body>

</html>